{"version":3,"names":[],"mappings":"","sources":["config.js"],"sourcesContent":["(function () {\n    'use strict';\n    require('angular-ui-router');\n\n    var angular = require('angular'),\n        app = angular.module('config', ['ui.router']);\n\n    app.config(['$stateProvider', '$urlRouterProvider', function ($stateProvider, $urlRouterProvider) {\n        var navView = {\n            templateUrl: 'partials/nav.html',\n            controller: 'NavCtrl'\n        };\n\n        $stateProvider\n            .state('index', {\n                url: '/',\n                views: {\n                    'content': {\n                        templateUrl: 'partials/index.html',\n                        controller: 'MainCtrl'\n                    },\n                    'nav': navView\n                }\n            })\n            .state('login', {\n                url: '/login',\n                views: {\n                    'content': {\n                        templateUrl: 'partials/login.html',\n                        controller: 'LoginCtrl'\n                    }\n                }\n            })\n            .state('customers', {\n                url: '/customers',\n                views: {\n                    'content': {\n                        templateUrl: 'partials/customers.html',\n                        controller: 'CustomersCtrl'\n                    },\n                    'nav': navView\n                }\n            })\n            .state('customers.details', {\n                url: '/customers/:customerId',\n                parent: 'customers',\n                views: {\n                    'customers': {\n                        templateUrl: 'partials/customers-details.html',\n                        controller: 'CustomerDetailsCtrl'\n                    }\n                }\n            })\n            .state('customers.details.invoices', {\n                url: '/customers/:customerId/invoices',\n                parent: 'customers.details',\n                views: {\n                    'invoices': {\n                        templateUrl: 'partials/customer-details/invoices.html',\n                        controller: 'CustomerInvoicesCtrl'\n                    }\n                }\n            });\n\n        $urlRouterProvider.otherwise('/');\n    }]);\n\n    app.run(['$log', '$rootScope', '$state', '$timeout', function ($log, $rootScope, $state, $timeout) {\n        var authenticated = false,\n            pending = null,\n            pendingParams = null;\n\n        $rootScope.$on('authenticated', function () {\n            authenticated = true;\n            var tmp, tmpParams;\n            if (pending) {\n                tmp = pending;\n                tmpParams = pendingParams;\n                pending = null;\n                pendingParams = null;\n\n                $timeout(function () {\n                    $state.go(tmp, tmpParams);\n                });\n            }\n        });\n\n        $rootScope.$on('not-authenticated', function () {\n            authenticated = false;\n        });\n\n        $rootScope.$on('$stateChangeStart', function (event, next, nextParams) {\n            if ('login' === next.name) {\n                return;\n            }\n\n            if (!authenticated) {\n                event.preventDefault();\n                pending = next;\n                pendingParams = nextParams;\n                $state.go('login');\n            }\n\n        });\n    }]);\n}());\n"],"file":"config.js","sourceRoot":"/source/"}