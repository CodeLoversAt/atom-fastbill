{"version":3,"names":[],"mappings":"","sources":["controller/projects.js"],"sourcesContent":["(function () {\n    'use strict';\n    module.exports = ['$scope', '$log', 'FastBill', '$filter', '$timeout', 'uiGridConstants', '$state', function ($scope, $log, FastBill, $filter, $timeout, uiGridConstants, $state) {\n        function projectsLoaded (projects) {\n            $scope.$apply(function () {\n                $scope.projects = projects;\n            });\n        }\n\n        if ($state.params.customerId) {\n            FastBill.getProjects($state.params.customerId).then(projectsLoaded);\n        } else {\n            FastBill.getProjects(null).then(projectsLoaded);\n        }\n\n        $scope.foo = function (row, column) {\n            $log.debug('[ProjectsCtrl] foo', row, column);\n        };\n\n        $scope.gridOptions = {\n            data: 'projectsData',\n            onRegisterApi: function (gridApi) {\n                $scope.gridApi = gridApi;\n            },\n            enableRowSelection: true,\n            enableSelectAll: true,\n            selectionRowHeaderWidth: 35,\n            rowHeight: 35,\n            showGridFooter:true,\n            columnDefs: [\n                {\n                    field: 'title',\n                    sort: {\n                        direction: uiGridConstants.ASC,\n                        priority: 1\n                    },\n                    displayName: $filter('translate')('PROJECT.TITLE')\n                },\n                {\n                    field: 'startDate',\n                    displayName: $filter('translate')('PROJECT.START_DATE')\n                }\n            ]\n        };\n\n        $scope.$watch('projects', function (projects) {\n            if (!projects) {\n                return;\n            }\n\n            $scope.projectsData = [];\n\n            projects.forEach(function (project) {\n                $scope.projectsData.push({\n                    title: project.title,\n                    startDate: project.startDate.format('L')\n                });\n            });\n\n            $log.debug('[CustomerProjectsCtrl] projectsData', $scope.projectsData);\n        });\n    }];\n}());\n"],"file":"controller/projects.js","sourceRoot":"/source/"}