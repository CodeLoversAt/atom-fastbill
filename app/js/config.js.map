{"version":3,"sources":["config.js"],"names":["require","angular","app","module","config","$stateProvider","$urlRouterProvider","navView","templateUrl","controller","state","url","views","content","nav","parent","customers","otherwise","run","$log","$rootScope","$state","$timeout","authenticated","pending","pendingParams","$on","tmp","tmpParams","go","event","next","nextParams","name","preventDefault"],"mappings":"CAAC,WACG,YACAA,SAAQ,oBAER,IAAIC,GAAUD,QAAQ,WAClBE,EAAMD,EAAQE,OAAO,UAAW,aAEpCD,GAAIE,QAAQ,iBAAkB,qBAAsB,SAAUC,EAAgBC,GAC1E,GAAIC,IACAC,YAAa,oBACbC,WAAY,UAGhBJ,GACKK,MAAM,SACHC,IAAK,IACLC,OACIC,SACIL,YAAa,sBACbC,WAAY,YAEhBK,IAAOP,KAGdG,MAAM,SACHC,IAAK,SACLC,OACIC,SACIL,YAAa,sBACbC,WAAY,gBAIvBC,MAAM,aACHC,IAAK,aACLC,OACIC,SACIL,YAAa,0BACbC,WAAY,iBAEhBK,IAAOP,KAGdG,MAAM,qBACHC,IAAK,yBACLI,OAAQ,YACRH,OACII,WACIR,YAAa,kCACbC,WAAY,0BAKvBC,MAAM,YACHC,IAAK,YACLC,OACIC,SACIL,YAAa,yBACbC,WAAY,gBAEhBK,IAAOP,KAInBD,EAAmBW,UAAU,QAGjCf,EAAIgB,KAAK,OAAQ,aAAc,SAAU,WAAY,SAAUC,EAAMC,EAAYC,EAAQC,GACrF,GAAIC,IAAgB,EAChBC,EAAU,KACVC,EAAgB,IAEpBL,GAAWM,IAAI,gBAAiB,WAC5BH,GAAgB,CAChB,IAAII,GAAKC,CACLJ,KACAG,EAAMH,EACNI,EAAYH,EACZD,EAAU,KACVC,EAAgB,KAEhBH,EAAS,WACLD,EAAOQ,GAAGF,EAAKC,QAK3BR,EAAWM,IAAI,oBAAqB,WAChCH,GAAgB,IAGpBH,EAAWM,IAAI,oBAAqB,SAAUI,EAAOC,EAAMC,GACnD,UAAYD,EAAKE,OAIhBV,IACDO,EAAMI,iBACNV,EAAUO,EACVN,EAAgBO,EAChBX,EAAOQ,GAAG","file":"config.js","sourcesContent":["(function () {\n    'use strict';\n    require('angular-ui-router');\n\n    var angular = require('angular'),\n        app = angular.module('config', ['ui.router']);\n\n    app.config(['$stateProvider', '$urlRouterProvider', function ($stateProvider, $urlRouterProvider) {\n        var navView = {\n            templateUrl: 'partials/nav.html',\n            controller: 'NavCtrl'\n        };\n\n        $stateProvider\n            .state('index', {\n                url: '/',\n                views: {\n                    'content': {\n                        templateUrl: 'partials/index.html',\n                        controller: 'MainCtrl'\n                    },\n                    'nav': navView\n                }\n            })\n            .state('login', {\n                url: '/login',\n                views: {\n                    'content': {\n                        templateUrl: 'partials/login.html',\n                        controller: 'LoginCtrl'\n                    }\n                }\n            })\n            .state('customers', {\n                url: '/customers',\n                views: {\n                    'content': {\n                        templateUrl: 'partials/customers.html',\n                        controller: 'CustomersCtrl'\n                    },\n                    'nav': navView\n                }\n            })\n            .state('customers.details', {\n                url: '/customers/:customerId',\n                parent: 'customers',\n                views: {\n                    'customers': {\n                        templateUrl: 'partials/customers-details.html',\n                        controller: 'CustomerDetailsCtrl'\n                    }\n                }\n            })\n\n            .state('invoices', {\n                url: '/invoices',\n                views: {\n                    'content': {\n                        templateUrl: 'partials/invoices.html',\n                        controller: 'InvoicesCtrl'\n                    },\n                    'nav': navView\n                }\n            });\n\n        $urlRouterProvider.otherwise('/');\n    }]);\n\n    app.run(['$log', '$rootScope', '$state', '$timeout', function ($log, $rootScope, $state, $timeout) {\n        var authenticated = false,\n            pending = null,\n            pendingParams = null;\n\n        $rootScope.$on('authenticated', function () {\n            authenticated = true;\n            var tmp, tmpParams;\n            if (pending) {\n                tmp = pending;\n                tmpParams = pendingParams;\n                pending = null;\n                pendingParams = null;\n\n                $timeout(function () {\n                    $state.go(tmp, tmpParams);\n                });\n            }\n        });\n\n        $rootScope.$on('not-authenticated', function () {\n            authenticated = false;\n        });\n\n        $rootScope.$on('$stateChangeStart', function (event, next, nextParams) {\n            if ('login' === next.name) {\n                return;\n            }\n\n            if (!authenticated) {\n                event.preventDefault();\n                pending = next;\n                pendingParams = nextParams;\n                $state.go('login');\n            }\n\n        });\n    }]);\n}());\n"],"sourceRoot":"/source/"}