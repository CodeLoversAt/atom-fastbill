{"version":3,"sources":["controller/projects.js"],"names":["module","exports","$scope","$log","FastBill","$filter","$timeout","uiGridConstants","$state","projectsLoaded","projects","$apply","params","customerId","getProjects","then","model","currentPage","projectsPerPage","startProject","endProject","projectsPerPageOptions","$watch","values","debug","parseInt","i","Math","max"],"mappings":"CAAC,WACG,YACAA,QAAOC,SAAW,SAAU,OAAQ,WAAY,UAAW,WAAY,kBAAmB,SAAU,SAAUC,EAAQC,EAAMC,EAAUC,EAASC,EAAUC,EAAiBC,GACtK,QAASC,GAAgBC,GACrBR,EAAOS,OAAO,WACVT,EAAOQ,SAAWA,IAItBF,EAAOI,OAAOC,WACdT,EAASU,YAAYN,EAAOI,OAAOC,YAAYE,KAAKN,GAEpDL,EAASU,YAAY,MAAMC,KAAKN,GAIpCP,EAAOc,OACHC,YAAa,EACbC,gBAAiB,GACjBC,aAAc,EACdC,WAAY,IAEhBlB,EAAOmB,wBAA0B,EAAG,EAAG,GAAI,GAAI,GAAI,IAEnDnB,EAAOoB,OAAO,4CAA6C,SAAUC,GACjEpB,EAAKqB,MAAM,wBAAyBD,EACpC,IAAIN,GAAcQ,SAASF,EAAO,IAC9BL,EAAkBO,SAASF,EAAO,IAClCG,EAAIC,KAAKC,IAAI,EAAGX,EAAc,EAElCf,GAAOc,MAAMG,aAAeO,EAAIR,EAChChB,EAAOc,MAAMI,WAAalB,EAAOc,MAAMG,aAAeD","file":"controller/projects.js","sourcesContent":["(function () {\n    'use strict';\n    module.exports = ['$scope', '$log', 'FastBill', '$filter', '$timeout', 'uiGridConstants', '$state', function ($scope, $log, FastBill, $filter, $timeout, uiGridConstants, $state) {\n        function projectsLoaded (projects) {\n            $scope.$apply(function () {\n                $scope.projects = projects;\n            });\n        }\n\n        if ($state.params.customerId) {\n            FastBill.getProjects($state.params.customerId).then(projectsLoaded);\n        } else {\n            FastBill.getProjects(null).then(projectsLoaded);\n        }\n\n        // pagination\n        $scope.model = {\n            currentPage: 1,\n            projectsPerPage: 10,\n            startProject: 0,\n            endProject: 10\n        };\n        $scope.projectsPerPageOptions = [1, 5, 10, 20, 25, 50];\n\n        $scope.$watch('[model.currentPage,model.projectsPerPage]', function (values) {\n            $log.debug('[ProjectsCtrl] values', values);\n            var currentPage = parseInt(values[0]),\n                projectsPerPage = parseInt(values[1]),\n                i = Math.max(0, currentPage - 1);\n\n            $scope.model.startProject = i * projectsPerPage;\n            $scope.model.endProject = $scope.model.startProject + projectsPerPage;\n        });\n    }];\n}());\n"],"sourceRoot":"/source/"}